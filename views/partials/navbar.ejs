<nav class="navbar">
  <div class="nav-container">
    <div class="nav-brand">
      <svg class="brand-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="9 11 12 14 22 4"></polyline>
        <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path>
      </svg>
      <a href="/"><span class="brand-name">Todoist</span></a>
    </div>
    
    <div class="nav-menu" id="navMenu">
      <% if (user) { %>
        <!-- Authenticated User -->
        <div class="user-profile">
          <div class="user-avatar">
            <span><%= user.name.charAt(0).toUpperCase() %></span>
          </div>
          <span class="username"><%= user.name %></span>
          <div class="dropdown-menu">
            <a href="/profile" class="dropdown-item">Profile</a>
            <a href="/settings" class="dropdown-item">Settings</a>
            <hr class="dropdown-divider">
              <a href="/" id="logout" class="dropdown-item">Logout</a>
          </div>
        </div>
      <% } else { %>
        <!-- Guest User -->
        <div class="nav-links">
          <a href="/auth/sign-in" class="nav-link">Sign In</a>
          <a href="/auth/sign-up" class="nav-link btn-signup">Sign Up</a>
        </div>
      <% } %>
    </div>

    <!-- Mobile Menu Toggle -->
    <button class="mobile-toggle" id="mobileToggle" aria-label="Toggle menu">
      <span></span>
      <span></span>
      <span></span>
    </button>
  </div>
</nav>

<script src="/js/signOut.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const mobileToggle = document.getElementById('mobileToggle');
    const navMenu = document.getElementById('navMenu');

    if (mobileToggle) {
      mobileToggle.addEventListener('click', function() {
        navMenu.classList.toggle('active');
        this.classList.toggle('active');
      });
    }
  });
</script>